<!-- Images and description -->
<section class="py-5">
  <div class="container">
    <div class="container row gx-5">

      <!-- Images Section -->
      <aside class="col-lg-6 d-flex flex-column align-content-center  justify-content-center">

        <!-- Main Image -->
        <div class=" mb-3 d-flex justify-content-center ">
          <a data-fslightbox="mygalley" class="rounded-4" target="_blank" data-type="image">
            <img style="max-width: 100%; max-height: 100vh; margin: auto;" id="mainImage" class="rounded-4 fit"
              [src]="currentImage" />
          </a>
        </div>

        <!-- All the Images -->
        <div class="d-flex justify-content-center mb-3">
          <!-- Other Images of the product [ngfor] -->
          <a data-fslightbox="mygalley" class="" target="_blank" data-type="image" class="item-thumb"
            *ngFor="let item of product.images" (click)="LoadImage(item)">
            <img width="60" height="60" class="rounded-2" src='{{item}}' />
          </a>
        </div>

      </aside>

      <!-- Description section -->
      <main class="col-lg-6">
        <div class="ps-lg-3">
          <div class="display-3">
            {{product.name}}
          </div>
          <div class="d-flex flex-row my-3">
            <div class="text-warning mb-1 me-2">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <span class="ms-1">
                4.5
              </span>
            </div>
            <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>{{countProductInOrders}} orders</span>
            <span class="text-success ms-2">In stock</span>
          </div>

          <div class="mb-3">
            <span class="h5">{{product.price}}LE</span>
            <span class="text-muted">/Piece</span>
          </div>

          <p>
            {{product.description}}
          </p>

          <div class="row">
            <dt class="col-3">Type:</dt>
            <dd class="col-9">{{product.categoryName}}</dd>

            <dt class="col-3">Color</dt>
            <dd class="col-9">{{product.color}}</dd>

            <dt class="col-3">Brand</dt>
            <dd class="col-9">{{product.brandName}}</dd>
          </div>

          <hr />


          <div class="quantity d-flex align-items-center">
            <select class="form-select mb-2" aria-label="Default select example" *ngIf="product.stockQuantity > 0"  [(ngModel)]="quantity">
              <option *ngFor="let i of getRange(product.stockQuantity)" [value]="i">{{ i }}</option>
            </select>
            
          </div>
          <div class="text-danger" *ngIf="quantity > 4">You Can't Add to Cart more than 5 Pieces!</div>
          <a class="btn btn-success shadow-0 m-1" (click)="buy()"> Buy now </a>
          <a class="btn btn-dark shadow-0 m-1" (click)="AddToCart()"> <i class="bi bi-cart-fill"></i> Add to cart </a>
          <a class="btn btn-dark shadow-0 m-1" (click)="AddToFavorite()"> <i class="bi bi-suit-heart-fill"></i>
            Save </a>
        </div>
      </main>

    </div>
  </div>
</section>

<!-- Reviews and Recommendations Section -->
<section class="bg-light border-top py-4">
  <div class="container">
    <div class="row gx-4">

      <!-- Reviews  -->
      <div class="col-lg-8 mb-4 p-4">
        <div class="border rounded-2 px-3 py-2 bg-white">
          <!-- Pills navs -->
          <div class="row">
            <div class="col-lg-12">

              <!-- Nav bar for the Reviews and specification section -->
              <nav class="product-info-tabs wc-tabs mt-5 mb-5">
                <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">

                  <a class="nav-item nav-link active" id="nav-home-tab" data-bs-toggle="tab" href="#nav-home" role="tab"
                    aria-controls="nav-home " aria-selected="true">Specifications</a>

                  <a class="nav-item nav-link" id="nav-contact-tab" data-bs-toggle="tab" href="#nav-contact" role="tab"
                    aria-controls="nav-contact" aria-selected="false">Reviews</a>

                </div>
              </nav>

              <div class="tab-content" id="nav-tabContent">

                <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                  <div class="tab-content" id="ex1-content">
                    <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                      <table class="table table-bordered w-100">
                        <tbody>
                          <tr>
                            <th scope="row">Brand</th>
                            <td> {{product.brandName}} </td>
                          </tr>
                          <tr>
                            <th scope="row">Model</th>
                            <td> {{product.model}} </td>
                          </tr>
                          <table class="table border mt-3 mb-2">
                            <tr>
                              <th class="py-2">Display:</th>
                              <td class="py-2">{{product.screenSize}}</td>
                            </tr>
                            <tr>
                              <th class="py-2">Processor capacity:</th>
                              <td class="py-2">{{product.cpu}}</td>
                            </tr>
                            <tr>
                              <th class="py-2">Camera quality:</th>
                              <td class="py-2">{{product.camera}}</td>
                            </tr>
                            <tr>
                              <th class="py-2">Memory</th>
                              <td class="py-2">{{product.ram}}</td>
                            </tr>
                          </table>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>


                <!-- Reviews -->
                <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">

                  <div class="container text-center">
                    <!-- Review Write Component -->
                    <app-review-rate></app-review-rate>
                    <app-review-write></app-review-write>
                    <app-review-list></app-review-list>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>



      <!-- Recommendations -->
      <div class="col-lg-4" style="overflow: auto;">
        <br>
        <div class="px-0 border rounded-2 shadow-0">
          <div class="card">
            <div class="card-body" style="min-height: 27rem; max-height: 40rem;">
              <h5 class="card-title m-3 text-center border-bottom">Similar Products</h5>

              <div class="d-flex mb-3 row" *ngFor="let item of relatedProducts" id="Holder">
                <a class=" col-4" href="/products/details/{{item.id}}">
                  <div id="img">
                    <img src="{{item.images[0] ? item.images[0] : 'assets/Images/NotFound.png'}}" class="img-fluid" />
                  </div>
                </a>
                <div class="info col-8">
                  <a class="nav-link mb-1" href="/products/details/{{item.id}}">
                    {{item.name}} <br />
                    {{item.description}}
                  </a>
                  <strong class="text-dark"> ${{item.price}}</strong>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
